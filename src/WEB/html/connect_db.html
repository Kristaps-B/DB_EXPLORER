<thml>
<head>
	<title>Connect DB</title>
	
	
	<script type="text/javascript">
	
	
		var db_json;
		
		function create() {
		
			// alert("Create ALL-DB");
			
			
			 app.creatingDB();
			 
			 loadDatabases ();
		}
	 
	
		function sbmButton () {
		
			 
			
			 
			
			var ip =  document.getElementById('IP').value;
			var port =  document.getElementById('PORT').value;
			var sid =  document.getElementById('SID').value;
			var un =  document.getElementById('UN').value;
			var pass =  document.getElementById('PASS').value;
			
			app.checkConnection(ip, port, sid, un, pass);
			
			
			
			return false;
		}
		
		
		function saveButton() {
			var ip =  document.getElementById('IP').value;
			var port =  document.getElementById('PORT').value;
			var sid =  document.getElementById('SID').value;
			var un =  document.getElementById('UN').value;
			var pass =  document.getElementById('PASS').value;
			
			app.saveDatabase(ip, port, sid, un, pass);
			
			
			loadDatabases ();
		}
		
		
		function pageAlert(str) {
			alert(str);
		}
		
		
		function openButton () {
			var ip =  document.getElementById('IP').value;
			var port =  document.getElementById('PORT').value;
			var sid =  document.getElementById('SID').value;
			var un =  document.getElementById('UN').value;
			var pass =  document.getElementById('PASS').value;
			
			
			app.goToMenu(ip, port, sid, un, pass);
		}
		
		
		
		
		function selectJson( n ) {
			
		 
			
			var nmb =  parseInt(n);
 
			
			document.getElementById('IP').value  = db_json[nmb].ip;
			document.getElementById('PORT').value  = db_json[nmb].port;
			document.getElementById('SID').value  = db_json[nmb].sid;
			document.getElementById('UN').value  = db_json[nmb].username;
			document.getElementById('PASS').value  = db_json[nmb].password;
			
		}
		
		
		function deleteDatabase (id) {
			//alert("Delete id: " + id);
			
			var r = confirm ("Delete Database with ID: " + id);
			
			if (r == false) {
				return;
			}
			
			app.deleteDatabase(id);
			loadDatabases();
			
		}
		
		
		
		function loadDatabases () {
			var table = document.getElementById("DB_TABLE");
			
			
			
			var tableHeaderRowCount = 1;
			var table = document.getElementById('DB_TABLE');
			var rowCount = table.rows.length;
			for (var i = tableHeaderRowCount; i < rowCount; i++) {
			    table.deleteRow(tableHeaderRowCount);
			}
			
			
			
			
			var db_str =  app.getDatabases();
			
			db_json = JSON.parse(db_str);
			
			
			
			
			for (var i = 0; i < db_json.length; i++) {
				
				var row = table.insertRow(i + 1);
				
				var cell =  row.insertCell(0);
				cell.innerHTML = i;
				
				var cell =  row.insertCell(1);
				cell.innerHTML = db_json[i].id;
				
				cell =  row.insertCell(2);
				cell.innerHTML = db_json[i].ip;
				
				cell =  row.insertCell(3);
				cell.innerHTML = db_json[i].port;
				
				cell =  row.insertCell(4);
				cell.innerHTML = db_json[i].sid;
				
				cell =  row.insertCell(5);
				cell.innerHTML = db_json[i].username;
				
				cell =  row.insertCell(6);
				cell.innerHTML = db_json[i].password;
				
				cell =  row.insertCell(7);
				cell.innerHTML = '<button   onclick="selectJson(' + i + ');" > SELECT </button>';
				
				cell =  row.insertCell(8);
				cell.innerHTML = '<button onclick="deleteDatabase(' + db_json[i].id + ')" > DELETE </button>';				
				
			}
			
			
			

			
		}
	
	</script>
	
</head>
<body  >
	<center>
		<h1>CONNECT_TO_DB</h1>
	</center>
	
	<center>
	
	<form  onsubmit="return false">
	
	<table>
		<tr>
			<th>
				IP:
			</th>
			<th>
				<input id="IP" type="text" value = "192.168.0.101" /> 
			</th>
		</tr>
		<tr>
			<th>
				PORT: 
			</th>
			<th>
				<input id="PORT" type="PORT" value = "1521" />
			</th>
		</tr>
		<tr>
			<th>
				SID: 
			</th>
			<th>
				<input id="SID" type="text" value = "ORCL" />
			</th>
		</tr>
		<tr>
			<th>
				USERNAME: 
			</th>
			<th>
				<input id="UN" type="text" value = "SYSTEM" />
			</th>
		</tr>
		<tr>
			<th>
				PASSWORD: 
			</th>
			<th>
				<input id="PASS" type="text" value = "kristaps1" />
			</th>
		</tr>
		
	</table>
	

	
	
		<button onclick="sbmButton();" > CHECK_CONNECTION </button>
		<button onclick="saveButton();" > SAVE_CONNECTION </button>	 
		<button onclick="openButton();" > OPEN_CONNECTION </button>	
	</center>
	

	<hr>
	</br> 
	
	<table id="DB_TABLE"  width="100%" border="1">
		<tr>
		    <th>NMB</th>
			<th>ID</th>
			<th>IP</th>
			<th>PORT</th>
			<th>SID</th>
			<th>USERNAME</th>
			<th>PASSWORD</th>
			<th>SELECT</th>
			<th>DELETE</th>
		</tr>
	</table>	
		
		
		
		
		
	
	</form>
</body>
</html>
